{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useLocation}from'react-router-dom';import api from'../services/Api';import'../styles/Orders.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SuccessBanner=_ref=>{let{orderId}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"order-success\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tick\",children:\"\\u2705\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order placed successfully!\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Congratulations \\u2014 your order \",/*#__PURE__*/_jsxs(\"strong\",{children:[\"#\",orderId]}),\" is confirmed. We'll email you the details shortly.\"]})]})]});};const Orders=()=>{var _location$state,_location$state2;const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const location=useLocation();useEffect(()=>{fetchOrders();},[]);const fetchOrders=async()=>{setLoading(true);try{const resp=await api.get('/orders');setOrders(resp.data||[]);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to load orders');}finally{setLoading(false);}};// If navigated from checkout we may get orderId in location.state or query\nconst justPlaced=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.orderPlaced;const orderId=(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.orderId;return/*#__PURE__*/_jsx(\"div\",{className:\"orders-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[justPlaced&&/*#__PURE__*/_jsx(SuccessBanner,{orderId:orderId||'—'}),/*#__PURE__*/_jsx(\"h1\",{children:\"Your Orders\"}),loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading orders\\u2026\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),!loading&&orders.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No orders yet \\u2014 your orders will appear here after checkout.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"orders-list\",children:orders.map(o=>{var _o$items;return/*#__PURE__*/_jsxs(\"div\",{className:\"order-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Order #\",o._id]}),/*#__PURE__*/_jsx(\"div\",{children:o.status})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-body\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Total: $\",o.total]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Items: \",((_o$items=o.items)===null||_o$items===void 0?void 0:_o$items.length)||0]})]})]},o._id);})})]})});};export default Orders;","map":{"version":3,"names":["React","useEffect","useState","useLocation","api","jsx","_jsx","jsxs","_jsxs","SuccessBanner","_ref","orderId","className","children","Orders","_location$state","_location$state2","orders","setOrders","loading","setLoading","error","setError","location","fetchOrders","resp","get","data","err","_err$response","_err$response$data","response","justPlaced","state","orderPlaced","length","map","o","_o$items","_id","status","total","items"],"sources":["C:/Users/user/ecommerce-web/frontend/src/pages/Orders.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport api from '../services/Api';\r\nimport '../styles/Orders.css';\r\n\r\nconst SuccessBanner = ({ orderId }) => (\r\n  <div className=\"order-success\">\r\n    <div className=\"tick\">✅</div>\r\n    <div>\r\n      <h2>Order placed successfully!</h2>\r\n      <p>Congratulations — your order <strong>#{orderId}</strong> is confirmed. We'll email you the details shortly.</p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst Orders = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  const fetchOrders = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const resp = await api.get('/orders');\r\n      setOrders(resp.data || []);\r\n    } catch (err) {\r\n      setError(err.response?.data?.error || 'Failed to load orders');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // If navigated from checkout we may get orderId in location.state or query\r\n  const justPlaced = location.state?.orderPlaced;\r\n  const orderId = location.state?.orderId;\r\n\r\n  return (\r\n    <div className=\"orders-page\">\r\n      <div className=\"container\">\r\n        {justPlaced && <SuccessBanner orderId={orderId || '—'} />}\r\n        <h1>Your Orders</h1>\r\n        {loading && <div>Loading orders…</div>}\r\n        {error && <div className=\"error\">{error}</div>}\r\n\r\n        {!loading && orders.length === 0 && (\r\n          <p>No orders yet — your orders will appear here after checkout.</p>\r\n        )}\r\n\r\n        <div className=\"orders-list\">\r\n          {orders.map(o => (\r\n            <div key={o._id} className=\"order-card\">\r\n              <div className=\"order-header\">\r\n                <div>Order #{o._id}</div>\r\n                <div>{o.status}</div>\r\n              </div>\r\n              <div className=\"order-body\">\r\n                <div>Total: ${o.total}</div>\r\n                <div>Items: {o.items?.length || 0}</div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}